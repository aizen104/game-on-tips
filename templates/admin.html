<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard | Game On Tips</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
</head>
<body>

<div class="container">
    <h1>Admin Dashboard</h1>

    <a href="/admin/logout" class="admin-btn">Logout</a>

    <!-- ================= ADD MATCH ================= -->
    <div class="card">
        <h2>Add Match</h2>

        <form method="POST">
            <input type="hidden" name="add_match" value="1">

            <input type="text" name="home_team" placeholder="Home Team" required>
            <input type="text" name="away_team" placeholder="Away Team" required>
            <input type="text" name="league" placeholder="League" required>

            <label>Kickoff Time</label>
            <input type="datetime-local" name="kickoff_time" required>

            <label>Plan</label>
            <select name="plan" required>
                <option value="">-- Select Plan --</option>
                <option value="ordinary">Ordinary</option>
                <option value="vip">VIP</option>
            </select>

            <button type="submit">Add Match</button>
        </form>
    </div>

    <!-- ================= ADD MARKET ================= -->
    <div class="card">
        <h2>Add Market / Tip</h2>

        <form method="POST">
            <input type="hidden" name="add_market" value="1">

            <label>Match</label>
            <select name="match_id" required>
                {% for match in matches %}
                <option value="{{ match.id }}">
                    {{ match.home_team }} vs {{ match.away_team }}
                    ({{ match.plan|upper }})
                </option>
                {% endfor %}
            </select>

            <label>Market Type</label>
            <select name="market_type" required>
                <option value="1X2">1X2</option>
                <option value="Over/Under">Over / Under</option>
                <option value="BTTS">Both Teams To Score</option>
                <option value="Double Chance">Double Chance</option>
                <option value="HT/FT">Half Time / Full Time</option>
                <option value="Correct Score">Correct Score</option>
                <option value="Special">Special</option>
            </select>

            <input type="text" name="market_detail" placeholder="e.g Over 2.5 / Home Win" required>
            <input type="text" name="pick" placeholder="Pick (e.g Over 2.5)" required>
            <input type="number" step="0.01" name="odds" placeholder="Odds" required>

            <button type="submit">Add Market</button>
        </form>
    </div>

    <!-- ================= MATCHES ================= -->
    <div class="card">
        <h2>Matches & Markets</h2>

        {% for match in matches %}
        <div class="match-box">
            <h4>
                {{ match.home_team }} vs {{ match.away_team }}
                <span class="badge">{{ match.plan|upper }}</span>
            </h4>

            <small>
                {{ match.league }} |
                {{ match.kickoff_time.strftime("%d %b %Y %H:%M") }}
            </small>

            <ul>
                {% for market in match.markets %}
                <li>
                    {{ market.market_type }} â€”
                    {{ market.market_detail }} |
                    <b>{{ market.pick }}</b> @ {{ market.odds }}
                    <small>({{ market.status }})</small>
                </li>
                {% else %}
                <li><em>No markets yet</em></li>
                {% endfor %}
            </ul>

            <a href="/admin/toggle/{{ match.id }}" class="button">
                {{ "Disable" if match.is_active else "Enable" }}
            </a>
        </div>
        {% endfor %}
    </div>

</div>

</body>
</html>

